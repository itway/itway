{"version":3,"sources":["youtube-dialog.coffee"],"names":[],"mappings":"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","file":"youtube-dialog.js","sourceRoot":"/source/","sourcesContent":["###\r\n  youtube dialog functionality\r\n###\r\n$.ItwayIO.youtubeDialog =\r\no:\r\n  dialog: $(\"[data-remodal-id='youtube']\")\r\n  button: $(\"[data-remodal-id='youtube'] .remodal-confirm\")\r\n  input: $(\"[name='youtube-link']\")\r\n  addonBtn: $(\"a.youtube\")\r\n  timer: undefined\r\n  warningTempl: \"<div class=\\\"text-danger\\\">The url doesnt match youtube video link.</div>\"\r\n  formInput: (val) ->\r\n    \"<input name='youtube_link' hidden class='hidden' data-youtube-id='youtube-input' value='#{val}'/>\"\r\n  dialogTempl: (ytId) ->\r\n    \"<div class=\\\"embed-responsive embed-responsive-16by9\\\">\r\n    <iframe id='youtubeVideo' src='https://www.youtube.com/embed/#{ytId}' frameborder=\\\"0\\\" allowfullscreen></iframe/>\r\n    </div>\"\r\n\r\ninitialize: ->\r\n  _this = this\r\n  _this.resolveWithTime()\r\n  ### if resolve link is youtube link it returns the link else returns false ###\r\n  ytId =  $.ItwayIO.cValidator.ytVidId(_this.o.input.val())\r\n  _this.o.button.on 'click', () ->\r\n    if !ytId && _this.o.input.val().length <= 6\r\n      _this.stop()\r\n      $(\"[data-youtube-id='youtube-input']\").attr('value', null)\r\n      _this.resolveAddon()\r\n\r\n    else\r\n      _this.o.dialog.find(\".text-danger\").remove()\r\n      _this.o.dialog.addClass \"approved\"\r\n      if $(\"[data-youtube-id='youtube-input']\").length < 1\r\n        _this.o.addonBtn.after _this.o.formInput($.ItwayIO.cValidator.ytVidId(_this.o.input.val()))\r\n      else $(\"[data-youtube-id='youtube-input']\").attr(\"value\",$.ItwayIO.cValidator.ytVidId(_this.o.input.val()))\r\n      _this.resolveAddon()\r\n  if !ytId\r\n    _this.o.dialog.removeClass \"approved\"\r\n    _this.resolveAddon()\r\n  else\r\n    _this.o.dialog.addClass \"approved\"\r\n    _this.o.dialog.find('.modal-form').after(_this.o.dialogTempl(ytId))\r\n    _this.resolveAddon()\r\n\r\nresolveWithTime: ->\r\n  _this = this\r\n  _this.o.input.keyup (e) ->\r\n    if (e.keyCode == 13 and $(e.target).val().length > 5 and $.ItwayIO.cValidator.ytVidId(_this.o.input.val())) or ($(e.target).val().length > 5 && $.ItwayIO.cValidator.ytVidId(_this.o.input.val()))\r\n      if _this.o.dialog.find('.embed-responsive-16by9').length >= 1\r\n        _this.o.dialog.find('.embed-responsive-16by9').remove()\r\n      _this.o.dialog.find(\".text-danger\").remove()\r\n      _this.resolve()\r\n    else\r\n      _this.o.dialog.removeClass(\"approved\")\r\n      _this.stop()\r\n      if _this.o.dialog.find(\".text-danger\").length < 1\r\n        _this.o.dialog.find('.modal-form').after(_this.o.warningTempl)\r\n      _this.o.dialog.find('.embed-responsive-16by9').remove()\r\nresolve: ->\r\n  _this = this\r\n  run = () ->\r\n    ytId =  $.ItwayIO.cValidator.ytVidId(_this.o.input.val())\r\n    _this.o.dialog.find('.modal-form').after(_this.o.dialogTempl(ytId))\r\n  _this.o.timer = setTimeout(run(), 3000)\r\nstop: ->\r\n  _this = this\r\n  clearTimeout _this.o.timer\r\nresolveAddon: ->\r\n  _this = this\r\n  _this.o.addonBtn.find(\".addon\").remove()\r\n  if _this.o.dialog.hasClass \"approved\"\r\n    _this.o.addonBtn.prepend(\"<span class='addon'><b class='text-danger'>+1</b> added</span>\")\r\n  else _this.o.addonBtn.find(\".addon\").remove()\r\n\r\n$.ItwayIO.youtubeDialog.initialize()\r\n"]}