{"version":3,"sources":["boxRefresh.coffee"],"names":[],"mappings":";AAAA;;;;;;;;;;AAAA;EAUA,CAAC,SAAC,CAAD;IAEC,CAAC,CAAC,EAAE,CAAC,UAAL,GAAkB,SAAC,OAAD;AAEhB,UAAA;MAAA,QAAA,GAAW,CAAC,CAAC,MAAF,CAAS;QAClB,OAAA,EAAS,cADS;QAElB,MAAA,EAAQ,EAFU;QAGlB,WAAA,EAAa,SAAC,GAAD,GAAA,CAHK;QAIlB,UAAA,EAAY,SAAC,GAAD,GAAA,CAJM;OAAT,EAMR,OANQ;MAQX,OAAA,GAAU,CAAA,CAAE,uFAAF;MAEV,KAAA,GAAQ,SAAC,GAAD;QAEN,GAAG,CAAC,MAAJ,CAAW,OAAX;QACA,QAAQ,CAAC,WAAW,CAAC,IAArB,CAA0B,GAA1B;MAHM;MAMR,IAAA,GAAO,SAAC,GAAD;QAEL,GAAG,CAAC,IAAJ,CAAS,OAAT,CAAiB,CAAC,MAAlB,CAAA;QACA,QAAQ,CAAC,UAAU,CAAC,IAApB,CAAyB,GAAzB;MAHK;aAMP,IAAC,CAAA,IAAD,CAAM,SAAA;AAEJ,YAAA;QAAA,IAAG,QAAQ,CAAC,MAAT,KAAmB,EAAtB;UACE,IAAG,OAAH;YACE,OAAO,CAAC,GAAR,CAAY,8CAAZ,EADF;;AAEA,iBAHF;;QAKA,GAAA,GAAM,CAAA,CAAE,IAAF;QAEN,IAAA,GAAO,GAAG,CAAC,IAAJ,CAAS,QAAQ,CAAC,OAAlB,CAA0B,CAAC,KAA3B,CAAA;QAEP,IAAI,CAAC,EAAL,CAAQ,OAAR,EAAiB,SAAC,CAAD;UACf,CAAC,CAAC,cAAF,CAAA;UAEA,KAAA,CAAM,GAAN;UAEA,GAAG,CAAC,IAAJ,CAAS,WAAT,CAAqB,CAAC,IAAtB,CAA2B,QAAQ,CAAC,MAApC,EAA4C,SAAA;YAC1C,IAAA,CAAK,GAAL;UAD0C,CAA5C;QALe,CAAjB;MAXI,CAAN;IAxBgB;EAFnB,CAAD,CAAA,CAiDE,MAjDF;AAVA","file":"../boxRefresh.js","sourcesContent":["###\r\n# BOX REFRESH BUTTON\r\n# ------------------\r\n# This is a custom plugin to use with the component BOX. It allows you to add\r\n# a refresh button to the box. It converts the box's state to a loading state.\r\n#\r\n# @type plugin\r\n# @usage $(\"#box-widget\").boxRefresh( options );\r\n###\r\n\r\n(($) ->\r\n\r\n  $.fn.boxRefresh = (options) ->\r\n# Render options\r\n    settings = $.extend({\r\n      trigger: '.refresh-btn'\r\n      source: ''\r\n      onLoadStart: (box) ->\r\n      onLoadDone: (box) ->\r\n\r\n    }, options)\r\n    #The overlay\r\n    overlay = $('<div class=\"overlay\"><div class=\"ui active centered large inline loader\"></div></div>')\r\n\r\n    start = (box) ->\r\n#Add overlay and loading img\r\n      box.append overlay\r\n      settings.onLoadStart.call box\r\n      return\r\n\r\n    done = (box) ->\r\n#Remove overlay and loading img\r\n      box.find(overlay).remove()\r\n      settings.onLoadDone.call box\r\n      return\r\n\r\n    @each ->\r\n#if a source is specified\r\n      if settings.source == ''\r\n        if console\r\n          console.log 'Please specify a source first - boxRefresh()'\r\n        return\r\n      #the box\r\n      box = $(this)\r\n      #the button\r\n      rBtn = box.find(settings.trigger).first()\r\n      #On trigger click\r\n      rBtn.on 'click', (e) ->\r\n        e.preventDefault()\r\n        #Add loading overlay\r\n        start box\r\n        #Perform ajax call\r\n        box.find('.box-body').load settings.source, ->\r\n          done box\r\n          return\r\n        return\r\n      return\r\n\r\n  return\r\n) jQuery\r\n"]}